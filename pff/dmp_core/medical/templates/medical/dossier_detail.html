{% extends 'medical/base.html' %}
{% block title %}Dossier Médical - {{ dossier.patient.user.get_full_name }}{% endblock %}

{% block content %}
<div class="card mb-4">
    <div class="card-header bg-primary text-white">
        <h3>Dossier Médical</h3>
    </div>
    <div class="card-body">
        <h4>Informations patient</h4>
        <p><strong>Nom :</strong> {{ dossier.patient.user.get_full_name }}</p>
        <p><strong>Date de naissance :</strong> {{ dossier.patient.date_naissance|date:"d/m/Y" }}</p>
        <p><strong>Groupe sanguin :</strong> {{ dossier.patient.groupe_sanguin }}</p>
        <p><strong>Antécédents :</strong> {{ dossier.patient.antecedents_familiaux }}</p>
    </div>
</div>

<div class="card">
    <div class="card-header bg-secondary text-white">
        <h4>Historique des consultations</h4>
    </div>
    <div class="card-body">
        {% for consultation in dossier.consultations.all %}
        <div class="mb-3 p-3 border rounded">
            <h5>{{ consultation.date|date:"d/m/Y H:i" }} - Dr. {{ consultation.medecin.user.get_full_name }}</h5>
            <p><strong>Motif :</strong> {{ consultation.motif }}</p>
            <p><strong>Diagnostic :</strong> {{ consultation.diagnostic }}</p>
            <p><strong>Traitement :</strong> {{ consultation.traitement }}</p>
        </div>
        {% empty %}
        <p>Aucune consultation enregistrée.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}